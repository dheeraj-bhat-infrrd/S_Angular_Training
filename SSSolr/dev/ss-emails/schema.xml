<?xml version="1.0" encoding="UTF-8" ?>
<!--  
 This is the Social Survey Solr schema file for core ss-branches. This file should be named "schema.xml" and
 should be in the conf directory under the solr home
 (i.e. ./solr/socialsurvey/ss-branches/conf/schema.xml by default) 
 or located where the classloader for the Solr webapp can find it.
-->

<schema name="db" version="1.1">
  <types> 
   <fieldType name="string"  class="solr.StrField" sortMissingLast="true" omitNorms="true"/>
   <fieldType name="boolean" class="solr.BoolField" sortMissingLast="true" omitNorms="true"/>
   <fieldType name="long" class="solr.TrieLongField" precisionStep="0" positionIncrementGap="0"/>
   <fieldType name="text" class="solr.TextField" positionIncrementGap="100">
      <analyzer type="index">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
   </fieldType>
   <fieldType name="integer" class="solr.IntField" omitNorms="true"/>
   <!-- A Trie based date field for faster date range queries and date faceting. -->
   <fieldType name="tdate" class="solr.TrieDateField" precisionStep="6" positionIncrementGap="0"/>
  </types>

  <fields>
    <field name="recipients" type="text" indexed="true" stored="true" required="true" multiValued="true" /> 
    <field name="subject" type="text" indexed="true" stored="true" />
    <field name="body" type="text" indexed="true" stored="true" />
    <field name="recipientType" type="long" indexed="true" stored="true" />
    <field name="senderEmailId" type="text" indexed="true" stored="true"/>
    <field name="senderName" type="text" indexed="true" stored="true"/>
    <field name="senderPassword" type="text" indexed="false" stored="true"/>
    <field name="sendEmailThrough" type="text" indexed="true" stored="true"/>
    <field name="attachmentDetail" type="text" indexed="false" stored="true" multiValued="true" /> 
    <field name="mailType" type="text" indexed="true" stored="true"/>
    <field name="companyId" type="long" indexed="true" stored="true" />
    <field name="regionId" type="long" indexed="true" stored="true" />
    <field name="branchId" type="long" indexed="true" stored="true" />
    <field name="agentId" type="long" indexed="true" stored="true" />
    <field name="agentEmailId" type="text" indexed="true" stored="true"/>
    <field name="sendMailToSalesLead" type="boolean" indexed="false" stored="true" />
    <field name="holdSendingMail" type="boolean" indexed="false" stored="true" />
    <field name="sendgridMessageId" type="string" indexed="true" stored="true" />
    <field name="emailAttemptedDate" type="tdate" indexed="true" stored="true" />
    <field name="emailDeliveredDate" type="tdate" indexed="true" stored="true" />
    <field name="emailDefferedDate" type="tdate" indexed="true" stored="true" />
    <field name="emailDroppedDate" type="tdate" indexed="true" stored="true" />
    <field name="emailBlockedDate" type="tdate" indexed="true" stored="true" />
    <field name="emailDroppedDate" type="tdate" indexed="true" stored="true" />
    <field name="emailOpenedDate" type="tdate" indexed="true" stored="true" />
    <field name="emailMarkedSpamDate" type="tdate" indexed="true" stored="true" />
    <field name="emailUnsubscribeDate" type="tdate" indexed="true" stored="true" />
    <field name="emailBounceDate" type="tdate" indexed="true" stored="true" />
    <field name="randomUUID" type="string" indexed="true" stored="true" required="true" />
    <field name="_version_" type="long" indexed="true" stored="true" multiValued="false"/>
    <field name="emailLinkClickedDate" type="tdate" indexed="true" stored="true" />
    <field name="branchName" type="text" indexed="true" stored="true"/>
    <field name="regionName" type="text" indexed="true" stored="true"/>
    <field name="surveySourceId" type="text" indexed="true" stored="true"/>
    <field name="recipientsName" type="text" indexed="true" stored="true" multiValued="true" />   
    <field name="isRetried" type="boolean" indexed="false" stored="true" />
  </fields>

 <uniqueKey>randomUUID</uniqueKey>

 <!-- field for the QueryParser to use when an explicit fieldname is absent -->
 <defaultSearchField>randomUUID</defaultSearchField>

 <!-- SolrQueryParser configuration: defaultOperator="AND|OR" -->
 <solrQueryParser defaultOperator="OR"/>

</schema>

