<?xml version="1.0" encoding="UTF-8" ?>
<!--
 This is the Social Survey Solr schema file for core ss-users. This file should be named "schema.xml" and
 should be in the conf directory under the solr home
 (i.e. ./solr/socialsurvey/ss-users/conf/schema.xml by default)
 or located where the classloader for the Solr webapp can find it.
-->

<schema name="db" version="1.1">
  <types>
   <fieldType name="string"  class="solr.StrField" sortMissingLast="true" omitNorms="true"/>
   <fieldType name="long" class="solr.TrieLongField" precisionStep="0" positionIncrementGap="0"/>
   <fieldType name="boolean" class="solr.BoolField" omitNorms="true"/>
   <fieldType name="text" class="solr.TextField" positionIncrementGap="100"  autoGeneratePhraseQueries="true">
      <analyzer type="index">
	<tokenizer class="solr.KeywordTokenizerFactory" />
	<filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
      <analyzer type="query">
	<tokenizer class="solr.KeywordTokenizerFactory"/>
	<filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
   </fieldType>
   <fieldType name="textEmailId" class="solr.TextField" sortMissingLast="true" omitNorms="true" autoGeneratePhraseQueries="true">
      <analyzer type="index">
	<tokenizer class="solr.KeywordTokenizerFactory"/>
	<filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
      <analyzer type="query">
	<tokenizer class="solr.KeywordTokenizerFactory"/>
	<filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
   </fieldType>
   <fieldType name="integer" class="solr.IntField" omitNorms="true"/>
  </types>

  <fields>
    <field name="userId" type="long" indexed="true" stored="true" required="true" multiValued="false" />
    <field name="companyId" type="long" indexed="true" stored="true" />
    <field name="loginName" type="text" indexed="true" stored="true" />
    <field name="firstName" type="text" indexed="true" stored="true" />
    <field name="lastName" type="text" indexed="true" stored="true" />
    <field name="displayName" type="text" indexed="true" stored="true" />
	<field name="title" type="text" indexed="true" stored="true" />
    <field name="aboutMe" type="text" indexed="true" stored="true" />
    <field name="profileUrl" type="text" indexed="true" stored="true" />
    <field name="profileName" type="text" indexed="true" stored="true" />
    <field name="profileImageUrl" type="text" indexed="true" stored="true" />
    <field name="profileImageUrlThumbnail" type="text" indexed="true" stored="true" />
    <field name="emailId" type="textEmailId" indexed="true" stored="true" />
    <field name="status" type="integer" indexed="true" stored="true" />
    <field name="isOwner" type="integer" indexed="true" stored="true" />
    <field name="isAgent" type="boolean" indexed="true" stored="true" />
    <field name="isBranchAdmin" type="boolean" indexed="true" stored="true" />
    <field name="isRegionAdmin" type="boolean" indexed="true" stored="true" />
    <field name="regions" type="long" indexed="true" stored="true" multiValued="true" />
    <field name="branches" type="long" indexed="true" stored="true" multiValued="true" />
    <field name="agentIds" type="long" indexed="true" stored="true" multiValued="true" />
    <field name="reviewCount" type="long" indexed="true" stored="true" />
    <field name="isProfileImageSet" type="boolean" indexed="true" stored="true" />
    <field name="_version_" type="long" indexed="true" stored="true" multiValued="false"/>
  </fields>

  <uniqueKey>userId</uniqueKey>

 <!-- field for the QueryParser to use when an explicit fieldname is absent -->
 <defaultSearchField>loginName</defaultSearchField>

 <!-- SolrQueryParser configuration: defaultOperator="AND|OR" -->
 <solrQueryParser defaultOperator="OR"/>

</schema>
